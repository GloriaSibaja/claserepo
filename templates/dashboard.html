<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Wellbeing & Security Analytics Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üß† Employee Wellbeing & Security Analytics</h1>
            <p class="subtitle">AI-Powered Risk Assessment Platform</p>
        </header>

        <div class="main-content">
            <!-- Input Form -->
            <div class="card input-card">
                <h2>üìä Employee Data Input</h2>
                <form id="analysisForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="employee_name">Employee Name</label>
                            <input type="text" id="employee_name" name="employee_name" value="John Doe" required>
                        </div>
                    </div>

                    <h3>Work Metrics</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="work_hours_per_week">Work Hours/Week</label>
                            <input type="number" id="work_hours_per_week" name="work_hours_per_week" 
                                   value="45" min="20" max="80" step="0.5" required>
                        </div>
                        <div class="form-group">
                            <label for="sleep_hours_per_day">Sleep Hours/Day</label>
                            <input type="number" id="sleep_hours_per_day" name="sleep_hours_per_day" 
                                   value="7" min="3" max="12" step="0.5" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="meetings_per_week">Meetings/Week</label>
                            <input type="number" id="meetings_per_week" name="meetings_per_week" 
                                   value="15" min="0" max="50" required>
                        </div>
                        <div class="form-group">
                            <label for="emails_per_day">Emails/Day</label>
                            <input type="number" id="emails_per_day" name="emails_per_day" 
                                   value="75" min="0" max="300" required>
                        </div>
                    </div>

                    <h3>Perception Scales (1-10)</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="deadline_pressure">Deadline Pressure</label>
                            <input type="range" id="deadline_pressure" name="deadline_pressure" 
                                   value="5" min="1" max="10" oninput="this.nextElementSibling.value = this.value">
                            <output>5</output>
                        </div>
                        <div class="form-group">
                            <label for="task_complexity">Task Complexity</label>
                            <input type="range" id="task_complexity" name="task_complexity" 
                                   value="5" min="1" max="10" oninput="this.nextElementSibling.value = this.value">
                            <output>5</output>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="team_support">Team Support</label>
                            <input type="range" id="team_support" name="team_support" 
                                   value="5" min="1" max="10" oninput="this.nextElementSibling.value = this.value">
                            <output>5</output>
                        </div>
                        <div class="form-group">
                            <label for="work_life_balance">Work-Life Balance</label>
                            <input type="range" id="work_life_balance" name="work_life_balance" 
                                   value="5" min="1" max="10" oninput="this.nextElementSibling.value = this.value">
                            <output>5</output>
                        </div>
                    </div>

                    <button type="submit" class="btn-primary">üîç Analyze Risk Profile</button>
                </form>
            </div>

            <!-- Results Section -->
            <div id="results" class="results-section" style="display: none;">
                <!-- Key Metrics Cards -->
                <div class="metrics-grid">
                    <div class="metric-card" id="stressCard">
                        <div class="metric-icon">üò∞</div>
                        <div class="metric-label">Stress Level</div>
                        <div class="metric-value" id="stressValue">-</div>
                        <div class="metric-confidence" id="stressConfidence">-</div>
                    </div>

                    <div class="metric-card" id="burnoutCard">
                        <div class="metric-icon">üî•</div>
                        <div class="metric-label">Burnout Score</div>
                        <div class="metric-value" id="burnoutValue">-</div>
                        <div class="metric-subtitle" id="burnoutLevel">-</div>
                    </div>

                    <div class="metric-card" id="phishingCard">
                        <div class="metric-icon">üé£</div>
                        <div class="metric-label">Phishing Vulnerability</div>
                        <div class="metric-value" id="phishingValue">-</div>
                        <div class="metric-subtitle" id="phishingLevel">-</div>
                    </div>

                    <div class="metric-card" id="probabilityCard">
                        <div class="metric-icon">‚ö†Ô∏è</div>
                        <div class="metric-label">Attack Success Rate</div>
                        <div class="metric-value" id="probabilityValue">-</div>
                        <div class="metric-subtitle">Estimated Probability</div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="charts-row">
                    <div class="card chart-card">
                        <h3>Burnout Components Breakdown</h3>
                        <div id="burnoutChart"></div>
                    </div>
                    <div class="card chart-card">
                        <h3>Risk Factors Distribution</h3>
                        <div id="riskChart"></div>
                    </div>
                </div>

                <!-- Executive Summary -->
                <div class="card executive-summary">
                    <h2>üìã Executive Summary</h2>
                    <div id="executiveSummary" class="summary-content">
                        <p class="loading">Generating analysis...</p>
                    </div>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div id="loading" class="loading-overlay" style="display: none;">
                <div class="spinner"></div>
                <p>Analyzing data...</p>
            </div>
        </div>

        <footer>
            <p>¬© 2026 Employee Analytics Platform | Powered by RandomForest ML + LLM</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>
